<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giphy Application</title>
</head>
<body>


    <div id= "gif">

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        

        var topics = ["cat", "dog", "lion", "giraffe", "horse", "rhino", "snake", "eagle", "ant", "ostrich", "tiger", "shark", "peacock", "hippo", "gorilla"];

        for (i=0; i< topics.length; i++){ 
        
        var buttons = $('<button id= animalButton>'+ topics[i] + '</button>')

        buttons.appendTo('#gif');
        };

         $("#animalButton").on('click', function(){
            var animal = $(this).attr("name");




       
            
        //var animal = "dog";
        var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + animal + "&limit=10&api_key=teVlhFeNMTpfHxFr44of6X2kggITSmoP";

        

        $.ajax({
            url: queryURL,
            method: "GET"

        })
        .then(function(response){
       console.log(response);
       console.log(queryURL);
       var results = response.data;

       for (var i = 0; i < results.length; i++) {
        if (results[i].rating !== "r" && results[i].rating !== "pg-13") {


        var gifDiv = $("<div>");
        var animalImage = $("<img>");

        var animalUrl = results[i].images.fixed_height.url;
        var p = $("<p>").text("Rating: " + results[i].rating);



        animalImage.attr("src", animalUrl);
        gifDiv.append(p);

        gifDiv.append(animalImage);

        $("#gif").prepend(gifDiv);
        };
    }});

});


        

//         After data comes back from the request
//         .then(function(response) {
//           console.log(queryURL);

//           console.log(response);
//           // storing the data from the AJAX request in the results variable
//           var results = response.data;

//           // Looping through each result item
//           for (var i = 0; i < results.length; i++) {


//             // Creating and storing a div tag
//             var animalDiv = $("<div>");

//             // Creating a paragraph tag with the result item's rating
//             var p = $("<p>").text("Rating: " + results[i].rating);

//             // Creating and storing an image tag
//             var animalImage = $("<img>");
//             // Setting the src attribute of the image to a property pulled off the result item
//             animalImage.attr("src", results[i].images.fixed_height.url);

//             // Appending the paragraph and image tag to the animalDiv
//             animalDiv.append(p);
//             animalDiv.append(animalImage);

//             // Prependng the animalDiv to the HTML page in the "#gifs-appear-here" div
//             $("#gifs-appear-here").prepend(animalDiv);
//           }
//         });
//    });






    </script>
</body>
</html>